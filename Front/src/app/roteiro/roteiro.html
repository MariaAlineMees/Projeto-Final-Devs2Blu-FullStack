<!-- A MatToolbar j√° est√° no app.html -->

<div class="page-container">

  <div class="welcome-header" *ngIf="username$ | async as username">
    <h1>üì∏ Bem-vindo(a), {{ username }}!</h1>
    <p class="welcome-message-text">Qual ser√° o seu pr√≥ximo destino? üó∫Ô∏èüß≥</p>
  </div>

  <!-- --- MUDAN√áA: Usar MatTabGroup --- -->
  <mat-tab-group dynamicHeight>
    <mat-tab label="Criar/Editar Roteiro">
      <div class="tab-content-wrapper">
        <div class="form-container">
          <h2>{{ isEditing ? 'Editar Roteiro' : 'Novo Roteiro' }}</h2>
          <form (ngSubmit)="salvarRoteiro()" class="roteiro-form">

            <mat-form-field appearance="outline">
              <mat-label>T√≠tulo</mat-label>
              <input matInput type="text" name="titulo" [(ngModel)]="novoRoteiro.titulo" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Destino</mat-label>
              <input matInput type="text" name="destino" [(ngModel)]="novoRoteiro.destino" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Data de In√≠cio</mat-label>
              <input matInput type="date" name="dataInicio" [(ngModel)]="novoRoteiro.dataInicio" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Data de Fim</mat-label>
              <input matInput type="date" name="dataFim" [(ngModel)]="novoRoteiro.dataFim" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Custo Estimado Por Pessoa</mat-label>
              <input matInput type="number" name="custoEstimado" [(ngModel)]="novoRoteiro.custoEstimado" required>
            </mat-form-field>

            <div class="form-actions">
              <button mat-raised-button color="primary" type="submit">{{ isEditing ? 'Atualizar' : 'Salvar' }}</button>
              <button mat-stroked-button type="button" (click)="resetForm()" *ngIf="isEditing">Cancelar</button>
            </div>
          </form>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="Meus Roteiros">
      <div class="tab-content-wrapper">
        <div class="list-container">
          <h2>Meus Roteiros</h2>
          <div *ngIf="roteiros.length === 0" class="empty-state">
            <p>Voc√™ ainda n√£o tem roteiros cadastrados.</p>
          </div>
          <div class="roteiro-grid" *ngIf="roteiros.length > 0">
            <mat-card *ngFor="let roteiro of roteiros" class="roteiro-card">
              <mat-card-header>
                <mat-card-title>{{ roteiro.titulo }}</mat-card-title>
                <mat-card-subtitle>{{ roteiro.destino }}</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content>
                <p><strong>Per√≠odo:</strong> {{ roteiro.dataInicio | date:'dd/MM/yyyy' }} - {{ roteiro.dataFim | date:'dd/MM/yyyy' }}</p>
                <p><strong>Custo Por Pessoa:</strong> {{ roteiro.custoEstimado | currency:'BRL' }}</p>
              </mat-card-content>
              <mat-card-actions>
                <button mat-button (click)="preencherFormulario(roteiro)">EDITAR</button>
                <button mat-button color="warn" (click)="deletarRoteiro(roteiro.id)">DELETAR</button>
              </mat-card-actions>
            </mat-card>
          </div>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
  <!-- --- FIM DA MUDAN√áA --- -->

</div>
